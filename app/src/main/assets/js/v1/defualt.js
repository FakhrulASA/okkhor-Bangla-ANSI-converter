function finishingTouch() {
  var final1 = document.getElementById("ansiText").value; 
  var final2 = final1.replace(/ ‡/g, " †");
  var final3 = final2.replace(/Ky/g, "Kz");
  var final4 = final3.replace(/°y/g, "°z");
  var final5 = final4.replace(/±y/g, "±z");
  var final6 = final5.replace(/Kèy/g, "Kèz");
  var final7 = final6.replace(/µy/g, "µz");
  var final8 = final7.replace(/K¬y/g, "K¬z");
  var final9 = final8.replace(/ÿy/g, "ÿz");
  var final10 = final9.replace(/³y/g, "³z");
  var final11 = final10.replace(/ÿèy/g, "ÿèz");
  var final12 = final11.replace(/»y/g, "»z");
  var final13 = final12.replace(/Oy/g, "Oz");
  var final14 = final13.replace(/¼y/g, "¼z");
  var final15 = final14.replace(/¼«y/g, "¼«z");
  var final16 = final15.replace(/•ÿy/g, "•ÿz");
  var final17 = final16.replace(/”Py/g, "”Pz");
  var final18 = final17.replace(/”Qy/g, "”Qz");
  var final19 = final18.replace(/”Ty/g, "”Tz");
  var final20 = final19.replace(/Qy/g, "Qz");
  var final21 = final20.replace(/Ày/g, "Àz");
  var final22 = final21.replace(/Áy/g, "Áz");
  var final23 = final22.replace(/Sy/g, "Sz");
  var final24 = final23.replace(/Ây/g, "Âz");
  var final25 = final24.replace(/Ãy/g, "Ãz");
  var final26 = final25.replace(/Uy/g, "Uz");
  var final27 = final26.replace(/Æy/g, "Æz");
  var final28 = final27.replace(/Wy/g, "Wz");
  var final29 = final28.replace(/Çy/g, "Çz");
  var final30 = final29.replace(/Xy/g, "Xz");
  var final31 = final30.replace(/Èy/g, "Èz");
  var final32 = final31.replace(/Éy/g, "Éz");
  var final33 = final32.replace(/Ðy/g, "Ðz");
  var final34 = final33.replace(/Zy/g, "Zz");
  var final35 = final34.replace(/Ëy/g, "Ëz");
  var final36 = final35.replace(/×y/g, "×z");
  var final37 = final36.replace(/™¢y/g, "™¢z");
  var final38 = final37.replace(/›Uy/g, "›Uz");
  var final39 = final38.replace(/Ûy/g, "Ûz");
  var final40 = final39.replace(/Úy/g, "Úz");
  var final41 = final40.replace(/š’y/g, "š’z");
  var final42 = final41.replace(/Üy/g, "Üz");
  var final43 = final42.replace(/Ü«y/g, "Ü«z");
  var final44 = final43.replace(/ßy/g, "ßz");
  var final45 = final44.replace(/Þy/g, "Þz");
  var final46 = final45.replace(/dy/g, "dz");
  var final47 = final46.replace(/d«y/g, "d«z");
  var final48 = final47.replace(/d¬y/g, "d¬z");
  var final49 = final48.replace(/äy/g, "äz");
  var final50 = final49.replace(/fy/g, "fz");
  var final51 = final50.replace(/çy/g, "çz");
  var final52 = final51.replace(/éy/g, "éz");
  var final53 = final52.replace(/îy/g, "îz");
  var final54 = final53.replace(/ðy/g, "ðz");
  var final55 = final54.replace(/ñy/g, "ñz");
  var final56 = final55.replace(/®‹y/g, "®‹z");
  var final57 = final56.replace(/óy/g, "óz");
  var final58 = final57.replace(/ôy/g, "ôz");
  var final59 = final58.replace(/®Œy/g, "®Œz");
  var final60 = final59.replace(/òy/g, "òz");
  var final61 = final60.replace(/¯‹y/g, "¯‹z");
  var final62 = final61.replace(/¯’y/g, "¯’z");
  var final63 = final62.replace(/ùy/g, "ùz");
  var final64 = final63.replace(/ù«y/g, "ù«z");
  var final65 = final64.replace(/¯‹¬y/g, "¯‹¬z");
  var final66 = final65.replace(/¯Œy/g, "¯Œz");
  var final67 = final66.replace(/þy/g, "þz");
  var final68 = final67.replace(/÷y/g, "÷z");
  var final69 = final68.replace(/ëy/g, "ëz");
  var final70 = final69.replace(/K~/g, "K‚");
  var final71 = final70.replace(/P~/g, "P‚");
  var final72 = final71.replace(/Q~/g, "Q‚");
  var final73 = final72.replace(/S~/g, "S‚");
  var final74 = final73.replace(/U~/g, "U‚");
  var final75 = final74.replace(/V~/g, "V‚");
  var final76 = final75.replace(/W~/g, "W‚");
  var final77 = final76.replace(/X~/g, "X‚");
  var final78 = final77.replace(/Z~/g, "Z‚");
  var final79 = final78.replace(/d~/g, "d‚");
  var final80 = final79.replace(/f~/g, "f‚");
  var final81 = final80.replace(/¤¢~/g, "¤¢‚");
  var final82 = final81.replace(/µ~/g, "µ‚");
  var final83 = final82.replace(/™¢~/g, "™¢‚");
  var final84 = final83.replace(/¯’~/g, "¯’‚");
  var final85 = final84.replace(/š’~/g, "š’‚");
  var final86 = final85.replace(/K„/g, "K…");
  var final87 = final86.replace(/L„/g, "L…");
  var final88 = final87.replace(/Q„/g, "Q…");
  var final89 = final88.replace(/S„/g, "S…");
  var final90 = final89.replace(/U„/g, "U…");
  var final91 = final90.replace(/V„/g, "V…");
  var final92 = final91.replace(/W„/g, "W…");
  var final93 = final92.replace(/X„/g, "X…");
  var final94 = final93.replace(/Z„/g, "Z…");
  var final95 = final94.replace(/d„/g, "d…");
  var final96 = final95.replace(/f„/g, "f…");
  var final97 = final96.replace(/¨y/g, "y¨");   
  var final98 = final97.replace(/Vy/g, "Vz");  
  var final99 = final98.replace(/Py/g, "Pz");
  var final100 = final99.replace(/¶y/g, "¶z"); 
  var final101 = final100.replace(/Êy/g, "Êz");
  var final102 = final101.replace(/dª/g, "d«"); 
  var final103 = final102.replace(/d«y/g, "d«z");
  var final104 = final103.replace(/Mª/g, "MÖ");
  var final105 = final104.replace(/cª/g, "cÖ");
  var final106 = final105.replace(/kª/g, "kÖ");
  var final107 = final106.replace(/úª/g, "úÖ");
  var final108 = final107.replace(/MÖy/g, "MÖ“");
  var final109 = final108.replace(/MÖ~/g, "MÖƒ");
  var final110 = final109.replace(/`ªy/g, "`ª“");
  var final111 = final110.replace(/`ª~/g, "`ªƒ");
  var final112 = final111.replace(/aªy/g, "aª“");
  var final113 = final112.replace(/aª~/g, "aªƒ");
  var final114 = final113.replace(/cÖy/g, "cÖ“");
  var final115 = final114.replace(/cÖ~/g, "cÖƒ");
  var final116 = final115.replace(/eªy/g, "eª“");
  var final117 = final116.replace(/eª~/g, "eªƒ");
  var final118 = final117.replace(/åy/g, "å“");
  var final119 = final118.replace(/å~/g, "åƒ");
  var final120 = final119.replace(/kÖy/g, "kÖ“");
  var final121 = final120.replace(/kÖ~/g, "kÖƒ");
  var final122 = final121.replace(/mªy/g, "mª“");
  var final123 = final122.replace(/mª~/g, "mªƒ");
  var final124 = final123.replace(/Üª/g, "Ü«");   
  var final125 = final124.replace(/°~/g, "°‚");
  var final126 = final125.replace(/±~/g, "±‚");
  var final127 = final126.replace(/Kè~/g, "Kè‚");
  var final128 = final127.replace(/K¬~/g, "K¬‚");
  var final129 = final128.replace(/ÿ~/g, "ÿ‚");
  var final130 = final129.replace(/³~/g, "³‚");
  var final131 = final130.replace(/ÿè~/g, "ÿè‚");
  var final132 = final131.replace(/»~/g, "»‚");
  var final133 = final132.replace(/O~/g, "O‚");
  var final134 = final133.replace(/¼~/g, "¼‚");
  var final135 = final134.replace(/¼«~/g, "¼«‚");
  var final136 = final135.replace(/•ÿ~/g, "•ÿ‚");
  var final137 = final136.replace(/”P~/g, "”P‚");
  var final138 = final137.replace(/”Q~/g, "”Q‚");
  var final139 = final138.replace(/”T~/g, "”T‚");
  var final140 = final139.replace(/À~/g, "À‚");
  var final141 = final140.replace(/Á~/g, "Á‚");
  var final142 = final141.replace(/Â~/g, "Â‚");
  var final143 = final142.replace(/Ã~/g, "Ã‚");
  var final144 = final143.replace(/Æ~/g, "Æ‚");
  var final145 = final144.replace(/Ç~/g, "Ç‚");
  var final146 = final145.replace(/È~/g, "È‚");
  var final147 = final146.replace(/É~/g, "É‚");
  var final148 = final147.replace(/Ð~/g, "Ð‚");
  var final149 = final148.replace(/Ë~/g, "Ë‚");
  var final150 = final149.replace(/×~/g, "×‚");
  var final151 = final150.replace(/›U~/g, "›U‚");
  var final152 = final151.replace(/Û~/g, "Û‚");
  var final153 = final152.replace(/Ú~/g, "Ú‚");
  var final154 = final153.replace(/Ü~/g, "Ü‚");
  var final155 = final154.replace(/Ü«~/g, "Ü«‚");
  var final156 = final155.replace(/ß~/g, "ß‚");
  var final157 = final156.replace(/Þ~/g, "Þ‚");
  var final158 = final157.replace(/d«~/g, "d«‚");
  var final159 = final158.replace(/d¬~/g, "d¬‚");
  var final160 = final159.replace(/ä~/g, "ä‚");
  var final161 = final160.replace(/ç~/g, "ç‚");
  var final162 = final161.replace(/é~/g, "é‚");
  var final163 = final162.replace(/î~/g, "î‚");
  var final164 = final163.replace(/ð~/g, "ð‚");
  var final165 = final164.replace(/ñ~/g, "ñ‚");
  var final166 = final165.replace(/®‹~/g, "®‹‚");
  var final167 = final166.replace(/ó~/g, "ó‚");
  var final168 = final167.replace(/ô~/g, "ô‚");
  var final169 = final168.replace(/®Œ~/g, "®Œ‚");
  var final170 = final169.replace(/ò~/g, "ò‚");
  var final171 = final170.replace(/¯‹~/g, "¯‹‚");
  var final172 = final171.replace(/ù~/g, "ù‚");
  var final173 = final172.replace(/ù«~/g, "ù«‚");
  var final174 = final173.replace(/¯‹¬~/g, "¯‹¬‚");
  var final175 = final174.replace(/¯Œ~/g, "¯Œ‚");
  var final176 = final175.replace(/þ~/g, "þ‚");
  var final177 = final176.replace(/÷~/g, "÷‚");
  var final178 = final177.replace(/ë~/g, "ë‚");
  var final179 = final178.replace(/¤¢y/g, "¤¢z");
  var final180 = final179.replace(/¶~/g, "¶‚");
  var final181 = final180.replace(/Ê~/g, "Ê‚");
  var final182 = final181.replace(/°„/g, "°…");
  var final183 = final182.replace(/±„/g, "±…");
  var final184 = final183.replace(/Kè„/g, "Kè…");
  var final185 = final184.replace(/µ„/g, "µ…");
  var final186 = final185.replace(/K¬„/g, "K¬…");
  var final187 = final186.replace(/ÿ„/g, "ÿ…");
  var final188 = final187.replace(/³„/g, "³…");
  var final189 = final188.replace(/ÿè„/g, "ÿè…");
  var final190 = final189.replace(/»„/g, "»…");
  var final191 = final190.replace(/O„/g, "O…");
  var final192 = final191.replace(/¼„/g, "¼…");
  var final193 = final192.replace(/¼«„/g, "¼«…");
  var final194 = final193.replace(/•ÿ„/g, "•ÿ…");
  var final195 = final194.replace(/”P„/g, "”P…");
  var final196 = final195.replace(/”Q„/g, "”Q…");
  var final197 = final196.replace(/”T„/g, "”T…");
  var final198 = final197.replace(/À„/g, "À…");
  var final199 = final198.replace(/Á„/g, "Á…");
  var final200 = final199.replace(/Â„/g, "Â…");
  var final201 = final200.replace(/Ã„/g, "Ã…");
  var final202 = final201.replace(/Æ„/g, "Æ…");
  var final203 = final202.replace(/Ç„/g, "Ç…");
  var final204 = final203.replace(/È„/g, "È…");
  var final205 = final204.replace(/É„/g, "É…");
  var final206 = final205.replace(/Ð„/g, "Ð…");
  var final207 = final206.replace(/Ë„/g, "Ë…");
  var final208 = final207.replace(/×„/g, "×…");
  var final209 = final208.replace(/™¢„/g, "™¢…");
  var final210 = final209.replace(/›U„/g, "›U…");
  var final211 = final210.replace(/Û„/g, "Û…");
  var final212 = final211.replace(/Ú„/g, "Ú…");
  var final213 = final212.replace(/š’„/g, "š’…");
  var final214 = final213.replace(/Ü„/g, "Ü…");
  var final215 = final214.replace(/Ü«„/g, "Ü«…");
  var final216 = final215.replace(/ß„/g, "ß…");
  var final217 = final216.replace(/Þ„/g, "Þ…");
  var final218 = final217.replace(/d«„/g, "d«…");
  var final219 = final218.replace(/d¬„/g, "d¬…");
  var final220 = final219.replace(/ä„/g, "ä…");
  var final221 = final220.replace(/ç„/g, "ç…");
  var final222 = final221.replace(/é„/g, "é…");
  var final223 = final222.replace(/î„/g, "î…");
  var final224 = final223.replace(/ð„/g, "ð…");
  var final225 = final224.replace(/ñ„/g, "ñ…");
  var final226 = final225.replace(/®‹„/g, "®‹…");
  var final227 = final226.replace(/ó„/g, "ó…");
  var final228 = final227.replace(/ô„/g, "ô…");
  var final229 = final228.replace(/®Œ„/g, "®Œ…");
  var final230 = final229.replace(/ò„/g, "ò…");
  var final231 = final230.replace(/¯‹„/g, "¯‹…");
  var final232 = final231.replace(/¯’„/g, "¯’…");
  var final233 = final232.replace(/ù„/g, "ù…");
  var final234 = final233.replace(/ù«„/g, "ù«…");
  var final235 = final234.replace(/¯‹¬„/g, "¯‹¬…");
  var final236 = final235.replace(/¯Œ„/g, "¯Œ…");
  var final237 = final236.replace(/þ„/g, "þ…");
  var final238 = final237.replace(/÷„/g, "÷…");
  var final239 = final238.replace(/ë„/g, "ë…");
  var final240 = final239.replace(/P„/g, "P…");
  var final241 = final240.replace(/¶„/g, "¶…"); 
  var final242 = final241.replace(/Ê„/g, "Ê…");
  var final243 = final242.replace(/nª/g, "n«");
  var final244 = final243.replace(/³ª/g, "³«");
  var final245 = final244.replace(/Qª/g, "Q«");
  var final246 = final245.replace(/îª/g, "î«");
  var final247 = final246.replace(/ùª/g, "ù«");
  var final248 = final247.replace(/ ‰/g, " ˆ");
  var final249 = final248.replace(/Ww়/g, "wo");
  var final250 = final249.replace(/W‡়/g, "‡o");
  var final251 = final250.replace(/W‰়/g, "‰o");
  var final252 = final251.replace(/Xw়/g, "wp");
  var final253 = final252.replace(/X‡়/g, "‡p");
  var final254 = final253.replace(/X‰়/g, "‰p");
  var final255 = final254.replace(/hw়/g, "wq");
  var final256 = final255.replace(/h‡়/g, "‡q");
  var final257 = final256.replace(/h‰়/g, "‰q");
  var final258 = final257.replace(/oy/g, "o–");
  var final259 = final258.replace(/_ªy/g, "_ª“");
  var final260 = final259.replace(/_ª~/g, "_ªƒ");
  var final261 = final260.replace(/iy/g, "i“");
  var final262 = final261.replace(/i~/g, "iƒ");
  var final263 = final262.replace(/'‡/g, "'†");
  var final264 = final263.replace(/'‰/g, "'ˆ");
  var final265 = final264.replace(/Ò‡/g, "Ò†");
  var final266 = final265.replace(/Ò‰/g, "Òˆ");
  var final267 = final266.replace(/\"‡/g, "\"†");
  var final268 = final267.replace(/\"‰/g, "\"ˆ");
  var final269 = final268.replace(/Ô‡/g, "Ô†");
  var final270 = final269.replace(/Ô‰/g, "Ôˆ");
  var final271 = final270.replace(/\n‡/g, "\n†");
  var final272 = final271.replace(/\n‰/g, "\nˆ");

  if(final272.charAt(0) == "‡") {
    var finalText = final272.replace("‡", "†");
  }  
  else if (final272.charAt(0) == "‰") {
    var finalText = final272.replace("‰", "ˆ");
  }  
  else {
    var finalText = final272;
  }  
  document.getElementById("ansiText").value = finalText;
}

  
document.getElementById("ansiText").oninput =  function ()
{
  var text = document.getElementById('ansiText').value;
  document.getElementsByClassName('mdl-textfield__input')[0].value = ConvertToUnicode("bijoy", text);
  document.getElementsByClassName('mdl-textfield')[0].MaterialTextfield.change();
} 


document.getElementById("uniText").oninput = function ()
{
  var text = document.getElementById("uniText").value;
  document.getElementsByClassName('mdl-textfield__input')[1].value = ConvertToASCII("bijoy", text);
  finishingTouch();	
  document.getElementsByClassName('mdl-textfield')[1].MaterialTextfield.change();
} 

function clearText() {
  textTest = document.getElementById("uniText").value;

  if (textTest == "") {
    var toast = document.getElementById("funcFailed");
    toast.classList.add("toastShow");
    setTimeout( function(){
      toast.classList.remove("toastShow"); 
    }, 3000);
  }

  else {
  	var toast = document.getElementById("clearSuccess");
  	toast.classList.add("toastShow");
  	setTimeout( function(){
  		toast.classList.remove("toastShow"); 
  	}, 3000);

    document.getElementById("uniText").value = "";
    document.getElementsByClassName('mdl-textfield')[0].MaterialTextfield.change();
    document.getElementById("ansiText").value = "";
    document.getElementsByClassName('mdl-textfield')[1].MaterialTextfield.change();
  }
}

function doCopy(wText) {
  textTest = document.getElementById("uniText").value;

  if (textTest == "") {
    var toast = document.getElementById("funcFailed");
    toast.classList.add("toastShow");
    setTimeout( function(){
      toast.classList.remove("toastShow"); 
    }, 3000);
  }

  else {
    var toast = document.getElementById("copySuccess");
    toast.classList.add("toastShow");
    setTimeout( function(){
    	toast.classList.remove("toastShow"); 
    }, 3000);
    
    var copyText = document.getElementById(wText);
    copyText.select();
    copyText.setSelectionRange(0, 99999)
    document.execCommand("copy");
  }
}



document.getElementById('pasteUni').addEventListener('click', ()=> {

    navigator.clipboard.readText()
    .then((text) =>{  
      if (text == "") {
        var toast = document.getElementById("pasteEmpty");
        toast.classList.add("toastShow");
        setTimeout( function(){
          toast.classList.remove("toastShow"); 
        }, 3000);
      }
      else {
        let pasteArea = document.getElementById('uniText');
        pasteArea.value = text;

        document.getElementById("ansiText").value = ConvertToASCII("bijoy", text);
        finishingTouch();

        var toast = document.getElementById("pasteSuccess");
        toast.classList.add("toastShow");
        setTimeout( function(){
          toast.classList.remove("toastShow"); 
        }, 3000);
      }
    })
    .catch(err => {
        var toast = document.getElementById("pasteFailed");
        toast.classList.add("toastShow");
        setTimeout( function(){
          toast.classList.remove("toastShow"); 
        }, 3000);
    });
	
});

document.getElementById('pasteAnsi').addEventListener('click', ()=> {

    navigator.clipboard.readText()
    .then((text) =>{  
      if (text == "") {
        var toast = document.getElementById("pasteEmpty");
        toast.classList.add("toastShow");
        setTimeout( function(){
          toast.classList.remove("toastShow"); 
        }, 3000);
      }
      else {
        let pasteArea = document.getElementById('ansiText');
        pasteArea.value = text;

        document.getElementById("uniText").value = ConvertToUnicode("bijoy", text);

        var toast = document.getElementById("pasteSuccess");
        toast.classList.add("toastShow");
        setTimeout( function(){
          toast.classList.remove("toastShow"); 
        }, 3000);
      }
    })
    .catch(err => {
        var toast = document.getElementById("pasteFailed");
        toast.classList.add("toastShow");
        setTimeout( function(){
          toast.classList.remove("toastShow"); 
        }, 3000);
    });

});